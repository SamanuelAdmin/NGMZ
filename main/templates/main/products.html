{% extends "main/base.html" %}
{% load static %}
{% load i18n %}


{% block styles %}
    <link rel="stylesheet" href="{% static 'main/css/products.css' %}">
{% endblock %}

{% block body %}
    <div class="container-wrapper">
        <div class="container">
            <div class="title">{{ title }}</div>

            <div class="control-menu">
                <div class="sort" method="GET">
                    <label for="sort" class="text">{% trans 'ProductspageSortBy' %}: </label>

                    <select name="sort" id="sort" class="sort-selector" onchange="changePathParams('sort', this.value);">
                        {% for sortType in availableSortTypes %}
                            <option value="{{ sortType.value }}"
                                {% if get.sort == sortType.value %}selected{% endif %}
                            >{{ sortType.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="paginator-configs">
                    {% for value in paginator_values %}
                        <div
                            class="config {% if value == currentPaginatorValue %}selected{% endif %}"
                            onclick="changePathParams('pag', '{{ value }}');"
                        >
                            {{ value }}
                        </div>
                    {% endfor %}
                </div>

                <div class="viewer-type">
                    <button
                        class="view-type-button {% if orientation == 'grid' %}selected{% endif %}"
                        onclick="changePathParams('view', 'grid');"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-testid="grid-icon" class="css-73cnv0"><path fill="currentColor" fill-rule="evenodd" d="m10 13 1 1v7l-1 1H3l-1-1v-7l1-1h7zm7.5 0c2.481 0 4.5 2.018 4.5 4.5S19.981 22 17.5 22a4.505 4.505 0 0 1-4.5-4.5c0-2.482 2.019-4.5 4.5-4.5zM9 15H4v5h5v-5zm8.5 0a2.503 2.503 0 0 0-2.5 2.5c0 1.378 1.122 2.5 2.5 2.5s2.5-1.122 2.5-2.5-1.122-2.5-2.5-2.5zM10 2l1 1v7l-1 1H3l-1-1V3l1-1h7zm11 0 1 1v7l-1 1h-7l-1-1V3l1-1h7zM9 4H4v5h5V4zm11 0h-5v5h5V4z"></path></svg>
                    </button>
                    <button
                        class="view-type-button {% if orientation == 'list' %}selected{% endif %}"
                        onclick="changePathParams('view', 'list');">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-testid="list-icon" class="css-fzwsw"><path fill="currentColor" fill-rule="evenodd" d="m21 13 1 1v7l-1 1H3l-1-1v-7l1-1h18zm-1 2H4v5h16v-5zm1-13 1 1v7l-1 1H3l-1-1V3l1-1h18zm-1 2H4v5h16V4z"></path></svg>
                    </button>
                </div>
            </div>

            <div
                class="
                    {% if orientation == 'grid' %}
                        products-container-grid
                    {% else %}
                        products-container-list
                    {% endif %}
                "
            >
                {% for product in products %}
                    <a class="product" href="{% url "product" product.tag %}">
                        <div class="img-box">
                            <img src="{{ media_url }}{{ product.photo }}">
                        </div>
                        {% if orientation == 'grid' %}
                            <div class="name">{{ product.name}}</div>
                            <div class="description">
                                {{ product.description }}
                            </div>
                        {% else %}
                            <div class="info">
                                <div class="name">{{ product.name}}</div>
                                <div class="description">
                                    {{ product.description }}
                                </div>
                            </div>
                        {% endif %}
                    </a>
                {% endfor %}
            </div>

            <div class="paginator-box">
                <div class="paginator">
                    {% if products.has_previous %}
                        <div class="page" onclick="changePathParams('page', '{{ products.previous_page_number }}');">« Назад</div>
                    {% endif %}

                    <div class="page selected">{{ currentPageString }}</div>

                    {% if products.has_next %}
                        <div class="page" onclick="changePathParams('page', '{{ products.next_page_number }}');">Вперед »</div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

{#    load all js#}
    <script src="{% static 'main/js/products_control_menu.js' %}"></script>
{% endblock %}